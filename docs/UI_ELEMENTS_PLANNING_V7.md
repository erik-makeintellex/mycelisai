# Mycelis V7 UI Elements Planning
## Soma-Centric, Repeatable, Trusted Interface Standard

Version: `1.0`  
Status: `Authoritative companion to UI Framework`  
Last Updated: `2026-02-26`

This document defines how Mycelis UI elements are selected, designed, documented, tested, and governed before implementation.

Primary companion:
- `docs/UI_FRAMEWORK_V7.md` (state contracts, gates, testing matrix)

---

## Table of Contents

1. [Purpose](#purpose)
2. [Design Goal for Soma](#design-goal-for-soma)
3. [Research Inputs (Popular UI Element Management Systems)](#research-inputs-popular-ui-element-management-systems)
4. [Synthesis and Mycelis Decisions](#synthesis-and-mycelis-decisions)
5. [UI Element Taxonomy for Mycelis](#ui-element-taxonomy-for-mycelis)
6. [Canonical Element Contracts](#canonical-element-contracts)
7. [Soma Interaction Design Model](#soma-interaction-design-model)
8. [Trusted Repeatable Expression Patterns](#trusted-repeatable-expression-patterns)
9. [Element Management Workflow](#element-management-workflow)
10. [Workspace Filesystem + RAG State UX Planning](#workspace-filesystem--rag-state-ux-planning)
11. [Documentation Governance and Archive Policy](#documentation-governance-and-archive-policy)
12. [Implementation Readiness Checklist](#implementation-readiness-checklist)
13. [References](#references)

---

## Purpose

Create one repeatable planning system for UI elements so teams can:
1. Design consistently before coding
2. Preserve operator trust under failure/degraded conditions
3. Scale surfaces without inventing new patterns each sprint

---

## Design Goal for Soma

Soma must feel:
1. Operational, not decorative
2. Explainable, not mystical
3. Recoverable, not brittle

Every Soma-facing surface must make user intent, system state, and next action explicit.

---

## Research Inputs (Popular UI Element Management Systems)

The following is a direct synthesis from current primary docs:

1. **Atlassian Design System**
- Emphasizes tokens as a single source of truth for design decisions and semantics-first token usage.

2. **Fluent 2**
- Uses layered token architecture (global + alias), with theming and accessibility as default system behavior.

3. **Material Web**
- Treats design tokens as the base of all UI elements and maps system/component tokens via CSS custom properties.

4. **Carbon Design System**
- Focuses on systematic component reuse and publishes accessibility test status for components.

5. **Shopify Polaris**
- Provides a unified component framework across multiple product surfaces with consistent APIs.

6. **Radix Primitives**
- Prioritizes accessible, unstyled, composable primitives and reliable behavior wiring.

7. **Storybook**
- Positions component-driven development as standard practice and supports autogenerated component docs (Autodocs).

Inference from the sources:
- High-performing systems converge on tokenization, semantic states, accessibility-first primitives, and doc/test coupling.

---

## Synthesis and Mycelis Decisions

Mycelis UI element management standard:

1. Tokens-first, semantic naming
- No direct hardcoded status colors in feature components.

2. Accessibility by default
- Keyboard and screen-reader behavior is part of element definition, not post-work.

3. Composable primitives
- Build complex Soma workflows from stable primitives/composites.

4. Single element contract
- Every new element must define inputs, states, actions, diagnostics, and tests.

5. Documentation and stories as release artifact
- Element is incomplete until docs and story coverage exist.

---

## UI Element Taxonomy for Mycelis

### Primitive
- Purpose: atomic visual/interaction unit.
- Examples: `StatusBadge`, `ActionButton`, `IconLabel`, `InlineHint`.

### Composite
- Purpose: operational blocks combining primitives.
- Examples: `CouncilCallErrorCard`, `SystemQuickChecksRow`, `StatusRow`, `ProposalBlock`.

### Surface
- Purpose: route-level orchestration and decision support.
- Examples: Workspace, Automations, Resources, System, Runs.

Rule:
- `Surface` owns fetch/normalization.
- `Composite` owns rendering behavior.
- `Primitive` owns deterministic display interaction.

---

## Canonical Element Contracts

Each element must declare:

```ts
type ElementContract = {
  id: string;
  level: "primitive" | "composite" | "surface";
  purpose: string;
  inputs: string[];
  outputs: string[];
  states: Array<"loading" | "ready" | "empty" | "degraded" | "error">;
  actions: string[];
  diagnostics: string[];
  accessibility: string[];
  testIds: string[];
};
```

No element may ship without all 5 states defined.

---

## Soma Interaction Design Model

### Input Plane
1. Message composer (default)
2. Direct council routing
3. Broadcast mode
4. Recovery actions (retry/reroute)

### Processing Plane
1. Mode awareness (`answer` vs `proposal`)
2. Governance posture visibility
3. Provider/brain visibility

### Output Plane
1. Answer block
2. Proposal block (confirm/cancel)
3. Failure card (structured)
4. Artifact block
5. Run link/provenance block

### Trust Plane
1. What happened
2. Why it happened (best-guess)
3. What to do next
4. How to inspect diagnostics

---

## Trusted Repeatable Expression Patterns

Every response path should map to one of these patterns:

1. `Inform`
- concise answer + optional context badges

2. `Propose`
- explicit intent, risk, tools, confirm token path

3. `Execute`
- run creation confirmation + trace link

4. `Recover`
- structured failure + minimum 2 actions

5. `Observe`
- timeline/chain/health navigation affordances

These patterns are the reusable Soma expression grammar across features.

---

## Element Management Workflow

1. Author `ElementContract` in docs before coding.
2. Create story entry and usage notes.
3. Implement component with canonical state model.
4. Add unit + integration + E2E coverage.
5. Add docs references in `/docs` manifest.
6. Attach lane evidence for gate promotion.

Recommended structure:
- `interface/components/shared/*` primitives
- `interface/components/{dashboard|automations|resources|system|runs}/*` composites/surfaces
- `docs/UI_ELEMENTS_PLANNING_V7.md` authoritative planning baseline

---

## Workspace Filesystem + RAG State UX Planning

### Workspace Filesystem (MCP-backed)
Planned user-capable elements:
1. `WorkspaceTreePanel`
2. `FilePreviewPane`
3. `FileActionBar` (open/create/append/refresh/copy path)
4. `SandboxBoundaryBadge` (shows active root and scope)

Operational requirements:
1. Display mounted root path and writable status
2. Show degraded state when MCP filesystem unavailable
3. Link file actions to run/timeline context where applicable

### RAG State Storage Visibility
Planned user-capable elements:
1. `MemoryStoreHealthCard`
2. `VectorIndexStatusRow`
3. `RetentionPolicyPanel`
4. `RecallDiagnosticsCard`

Operational requirements:
1. Show PostgreSQL/pgvector connectivity status
2. Show ingestion lag / last index update
3. Show tenant-scoped persistence status
4. Provide actions to inspect memory events

---

## Documentation Governance and Archive Policy

1. Active docs are implementation authority.
2. Archive docs are historical context only.
3. Archive docs must be labeled and grouped separately in docs hub.
4. New UI implementation must not reference archive docs as normative source.

---

## Implementation Readiness Checklist

- [ ] Element contract authored
- [ ] States and transitions mapped
- [ ] Accessibility behaviors defined
- [ ] Failure/degraded recovery actions defined
- [ ] Story/docs entry added
- [ ] Unit/integration/E2E tests planned
- [ ] Linked to lane and gate criteria

---

## References

- Atlassian Design Tokens: https://atlassian.design/foundations/tokens/design-tokens/
- Atlassian Foundations: https://atlassian.design/foundations/
- Fluent 2 Design Tokens: https://fluent2.microsoft.design/design-tokens
- Fluent 2 Design Start: https://fluent2.microsoft.design/get-started/design
- Material Web Theming: https://material-web.dev/theming/material-theming/
- Material Web Intro: https://material-web.dev/about/intro/
- Carbon Components Overview: https://carbondesignsystem.com/components/overview/components/
- Carbon Accessibility Status: https://carbondesignsystem.com/components/overview/accessibility-status/
- Shopify Polaris Overview: https://shopify.dev/docs/api/polaris
- Shopify Polaris Web Components: https://shopify.dev/docs/api/app-home/polaris-web-components
- Radix Primitives Intro: https://www.radix-ui.com/primitives/docs/overview/introduction
- Radix Accessibility: https://www.radix-ui.com/primitives/docs/overview/accessibility
- Storybook Get Started: https://storybook.js.org/docs/
- Storybook Autodocs: https://storybook.js.org/docs/writing-docs/autodocs

