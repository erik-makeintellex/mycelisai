replicaCount: 1

image:
  repository: mycelis/core
  tag: latest
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 8080

resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 256Mi

podSecurityContext:
  runAsUser: 10001
  runAsGroup: 10001
  fsGroup: 10001
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop: ["ALL"]

# Environment variables (Extras)
env: []

# NATS JetStream Configuration
nats:
  enabled: true
  config:
    jetstream:
      enabled: true
      max_memory_store: 128Mi
      max_file_store: 2Gi # Event Store Limit
      store_dir: /data/jetstream
  jetstream:
    enabled: true
    fileStore:
      pvc:
        enabled: true
        size: 5Gi
        storageClassName: standard
  securityContext:
    runAsNonRoot: true
    runAsUser: 1001
    fsGroup: 1001
    allowPrivilegeEscalation: false
    capabilities:
      drop: ["ALL"]

# PostgreSQL Configuration (Bitnami)
# PostgreSQL Configuration (Bitnami)
postgresql:
  enabled: true
  image:
    registry: docker.io
    repository: pgvector/pgvector
    tag: "pg16"
  auth:
    postgresPassword: ""
    username: ""
    password: ""
    database: ""
  primary:
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi
    persistence:
      enabled: true
      size: 1Gi
    podSecurityContext:
      fsGroup: 999
      runAsUser: 999
    containerSecurityContext:
      runAsUser: 999
      readOnlyRootFilesystem: false
      allowPrivilegeEscalation: true
