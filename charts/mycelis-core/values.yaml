replicaCount: 1

image:
  repository: mycelis/core
  tag: latest
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 8080

resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 256Mi

podSecurityContext:
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop: ["ALL"]

# Agent output data volume (artifacts, generated files, media)
dataVolume:
  size: 2Gi
  storageClassName: standard

# Environment variables (Extras)
env:
  - name: OLLAMA_HOST
    value: "http://192.168.50.156:11434"
  - name: DATA_DIR
    value: "/data/artifacts"

# NATS JetStream Configuration
nats:
  enabled: true
  config:
    jetstream:
      enabled: true
      max_memory_store: 128Mi
      max_file_store: 2Gi # Event Store Limit
      store_dir: /data/jetstream
  jetstream:
    enabled: true
    fileStore:
      pvc:
        enabled: true
        size: 5Gi
        storageClassName: standard
  securityContext:
    runAsNonRoot: true
    runAsUser: 1000
    fsGroup: 1000
    allowPrivilegeEscalation: false
    capabilities:
      drop: ["ALL"]

# PostgreSQL Configuration (Bitnami)
# PostgreSQL Configuration (Bitnami)
postgresql:
  enabled: true
  image:
    registry: docker.io
    repository: pgvector/pgvector
    tag: "pg16"
  auth:
    postgresPassword: ""
    username: ""
    password: ""
    database: "cortex"
  primary:
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi
    persistence:
      enabled: true
      size: 1Gi
    podSecurityContext:
      fsGroup: 1000
      runAsUser: 1000
    containerSecurityContext:
      runAsUser: 1000
      readOnlyRootFilesystem: false
      allowPrivilegeEscalation: true
