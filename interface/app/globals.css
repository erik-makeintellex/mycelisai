@import "tailwindcss";
@import "leaflet/dist/leaflet.css";

@theme {
  --font-sans: var(--font-inter), ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --font-mono: var(--font-mono), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* Cortex Palette — Vuexy Dark Protocol (Midnight Override) */
  --color-cortex-bg: #09090b;
  /* zinc-950 */
  --color-cortex-surface: #18181b;
  /* zinc-900 */
  --color-cortex-primary: #06b6d4;
  /* cyan-500 */
  --color-cortex-primary-glow: rgba(6, 182, 212, 0.39);
  --color-cortex-success: #10b981;
  /* emerald-500 */
  --color-cortex-warning: #f59e0b;
  /* amber-500 */
  --color-cortex-danger: #ef4444;
  /* red-500 */
  --color-cortex-info: #3b82f6;
  /* blue-500 */
  --color-cortex-text-main: #d4d4d8;
  /* zinc-300 */
  --color-cortex-text-muted: #71717a;
  /* zinc-500 */
  --color-cortex-border: #27272a;
  /* zinc-800 */
}

@layer base {
  :root {
    --background: 37 41 60;
    --foreground: 207 211 236;
    --surface: 47 51 73;
    --surface-hover: 55 60 85;
    --border: 67 73 104;
    --border-active: 115 103 240;

    /* Semantic Status Colors */
    --status-stable: 40 199 111;
    --status-stable-bg: 30 50 40;
    --status-warning: 255 159 67;
    --status-warning-bg: 50 40 25;
    --status-critical: 234 84 85;
    --status-critical-bg: 50 25 25;
    --status-active: 115 103 240;
    --status-active-bg: 35 30 60;
  }

  body {
    background-color: var(--color-cortex-bg);
    color: var(--color-cortex-text-main);
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
  }
}

@layer components {

  /* Cortex Card */
  .cortex-card {
    @apply rounded-xl border shadow-sm transition-shadow duration-200 hover:shadow-md;
    background-color: var(--color-cortex-surface);
    border-color: var(--color-cortex-border);
  }

  /* Cortex Panel (Sidebar/Header) */
  .cortex-panel {
    background-color: var(--color-cortex-surface);
    border-color: var(--color-cortex-border);
  }

  /* Glass Morphism */
  .glass {
    @apply backdrop-blur-md border;
    background-color: rgba(47, 51, 73, 0.7);
    border-color: var(--color-cortex-border);
  }

  /* Glow Utilities */
  .glow-stable {
    box-shadow: 0 0 12px rgba(40, 199, 111, 0.3);
  }

  .glow-active {
    box-shadow: 0 0 12px rgba(115, 103, 240, 0.3);
  }

  .glow-critical {
    box-shadow: 0 0 12px rgba(234, 84, 85, 0.3);
  }

  .glow-primary {
    box-shadow: 0 4px 14px 0 rgba(115, 103, 240, 0.39);
  }

  /* Active nav pill — Vuexy style */
  .nav-pill-active {
    @apply rounded-lg text-white;
    background-color: var(--color-cortex-primary);
    box-shadow: 0 4px 14px 0 rgba(115, 103, 240, 0.39);
  }

  /* Ghost Draft Nodes — Symbiote "thinking" state */
  .ghost-draft {
    animation: pulse-border 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .react-flow__node.ghost-draft>div {
    opacity: 0.5;
    border-style: dashed;
    border-color: rgba(115, 103, 240, 0.4);
  }

  /* Observable Plot — Vuexy Dark Overrides */
  .chart-container figure[aria-label] {
    color: var(--color-cortex-text-main);
    background: transparent;
  }

  .chart-container figure[aria-label] text {
    fill: var(--color-cortex-text-muted);
  }

  .chart-container figure[aria-label] line,
  .chart-container figure[aria-label] .tick line {
    stroke: var(--color-cortex-border);
  }

  .chart-container figure[aria-label] .domain {
    stroke: var(--color-cortex-border);
  }

  /* Leaflet — Vuexy Dark Overrides */
  .leaflet-container {
    background-color: var(--color-cortex-surface);
  }

  .leaflet-control-zoom a {
    background-color: var(--color-cortex-surface) !important;
    color: var(--color-cortex-text-main) !important;
    border-color: var(--color-cortex-border) !important;
  }

  .leaflet-popup-content-wrapper,
  .leaflet-popup-tip {
    background-color: var(--color-cortex-surface);
    color: var(--color-cortex-text-main);
  }
}

@keyframes pulse-border {

  0%,
  100% {
    border-color: rgba(115, 103, 240, 0.4);
  }

  50% {
    border-color: rgba(115, 103, 240, 1);
    box-shadow: 0 0 15px rgba(115, 103, 240, 0.5);
  }
}

/* Override ReactFlow's default canvas background */
.react-flow {
  background-color: #09090b !important;
}

/* Agent Activity Ring — orbiting glow when agent is "thinking" */
.activity-ring {
  animation: ring-pulse 1.5s ease-in-out infinite;
}

@keyframes ring-pulse {

  0%,
  100% {
    border-color: rgba(115, 103, 240, 0.3);
    box-shadow: 0 0 0 rgba(115, 103, 240, 0);
  }

  50% {
    border-color: rgba(115, 103, 240, 0.8);
    box-shadow: 0 0 16px rgba(115, 103, 240, 0.35);
  }
}

/* Deliverables Tray — subtle pulse to signal pending human action */
.animate-pulse-subtle {
  animation: pulse-subtle 3s ease-in-out infinite;
}

@keyframes pulse-subtle {

  0%,
  100% {
    box-shadow: 0 4px 20px rgba(40, 199, 111, 0.08);
  }

  50% {
    box-shadow: 0 4px 24px rgba(40, 199, 111, 0.2);
  }
}