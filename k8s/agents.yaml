apiVersion: apps/v1
kind: Deployment
metadata:
  name: agent-a1
  namespace: mycelis
spec:
  replicas: 1
  selector:
    matchLabels:
      app: agent-a1
  template:
    metadata:
      labels:
        app: agent-a1
    spec:
      containers:
      - name: agent-a1
        image: mycelis-api:latest
        imagePullPolicy: Never
        command: ["uv", "run", "agents/runner.py", "a1", "--api", "http://api:8000", "--nats", "nats://nats:4222"]
        env:
        - name: OLLAMA_HOST
          value: "192.168.50.156"
        # Add host alias for Linux users if needed, though host.docker.internal is becoming standard
      # Optional: Host aliases for Linux if host.docker.internal doesn't work out of the box
      # hostAliases:
      # - ip: "172.17.0.1" # Gateway IP (example)
      #   hostnames:
      #   - "host.docker.internal"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: agent-architect
  namespace: mycelis
spec:
  replicas: 1
  selector:
    matchLabels:
      app: agent-architect
  template:
    metadata:
      labels:
        app: agent-architect
    spec:
      containers:
      - name: agent-architect
        image: mycelis-api:latest
        imagePullPolicy: Never
        command: ["uv", "run", "agents/runner.py", "architect", "--api", "http://api:8000", "--nats", "nats://nats:4222"]
        env:
        - name: OLLAMA_HOST
          value: "host.docker.internal"

